<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Address Book Reader</title>
<link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQAAAADrRVxmAAAACXBIWXMAAAMfAAADHwHmEQywAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAVZJREFUSMfd1EuOwyAMAFAQ0rAZNUfIUTga5GbsZtkrcINhyQLBYMgHG6ZddJcoSpOXDzY2ZZls7F5Q9iAzhyu/XsAomCm4AdRHYPUUNAH7GTgdRbZd+k6FCZgGZQPw/DV45dgIWw+rc3rrRvGrHcBrjmDzqocAIBCIsr+ERcYFwYNAfMj0QPC9pC+JIWNgpfJvQGXTQwJYCFgMegSHIWPIA/DaplO49UIuEy7qUR5gWakJHA+oXZhNZYBYQNQnlgaBKSthrRjRwJXfcu+ZA28A5fmF7yXWwKg+BgB9AJyxPtgGib8FQSCKjEcZQR7XqUUaTgiCgJME9vRPMEwREJk+McCKodUBDUvjiDTSfU4v2NPvwCqc7QHif3Bz6Ga9vZIYga5yVs9rO1Qf+uOnSw6yhnKu2Yurx+C/Ru8TVLuQl9HPtmx9CqCvTlYwxxz3eqhv3Htl/wEokJpySHNGkgAAAABJRU5ErkJggg==" rel="icon"/>
<style>
@media (prefers-color-scheme:dark) {body {background-color:#000;color:#FFF;}
a:visited {color:#C0F;}
a:link, a:hover, a:active {color:#0CF;}
}
@media print {body {max-width:8in;font-size:12px;margin:0;}
}
@media screen {body {font-family:sans-serif;max-width:35em;margin:22px auto 64px auto;padding:0 8px;}
}
body {overflow-wrap:break-word;}
@page {size:auto;margin:0.25in 0.5in 0.4in 0.5in;}
svg {fill:currentColor;}
img {max-width:100%;height:auto;}
hr {border-style:solid none;}
.content {margin:1em 0;}
.content hr {padding:0;margin:0;border:none;text-align:center;}
.content hr:after {font-size:150%;content:"* \A0 * \A0 *";display:block;position:relative;}
.rightside {text-align:right;}
.centered {text-align:center;}
pre {overflow-x:auto;}
.byline > * {display:inline-block;border-style:solid;border-width:thin;padding:3px 8px;border-radius:5px;text-align:initial;}
.byline {text-align:right;}
.box {border-style:solid;border-width:thin;margin:8px 0;padding:0 8px;}
a.hiddenlink:link {background:inherit;color:inherit;text-decoration:none;}
a.hiddenlink:visited {background:inherit;color:inherit;text-decoration:none;}
a.hiddenlink:active {background:inherit;color:inherit;text-decoration:none;}
ul,ol {padding-left:30px;}
table.border {border-collapse:collapse;margin:8px auto;}
table.border tr > * {border-style:solid;border-width:thin;padding:3px 8px;border-radius:5px;}
.tophead {text-align:center;margin:1ex auto 0 auto;max-width:35em;}
.tightmargins li > ul > li {list-style-type:square;}
.tightmargins h1,
.tightmargins h2,
.tightmargins p,
.tightmargins ul {margin:0.5ex 0;}
.tightmargins li > ul {margin:0 0 0.5ex 0;}
.tightmargins ul {padding-left:30px;}
.tightmargins li {margin:0 0 0.5ex 0;}
.plainlink a:link,
.plainlink a:visited,
.plainlink a:hover,
.plainlink a:active {color:inherit;text-decoration:underline;}
.nolink a:link,
.nolink a:visited,
.nolink a:hover,
.nolink a:active {color:inherit;text-decoration:none;}
div.lcr {display:grid;grid-template-columns:auto auto auto;}
ul.flat {list-style-type:none;margin:16px 0;padding:0;}
ul.flat li {display:inline;}
ul.flat li::after {content:"]";}
ul.flat li::before {content:"[";}
</style>
<!--
Copyright 2002-2022 Hal Canary. ALL RIGHTS RESERVED.
-->
</head>
<body>
<div class="tophead" role="banner">
<svg aria-label="Hal W Canary 3" role="img" viewBox="-200 0 800 91" width="100%">
<title>Hal W Canary 3</title>
<rect height="4" width="180" x="-200" y="43" />
<rect height="4" width="180" x="420" y="43" />
<path d="M 34 0 C 30 6 28 13 27 20 C 26 23 27 28 25 31 C 21 35 13 34 9 35 C 12
24 9 13 12 3 L 8 2 C 4 18 6 36 3 53 C 2 58 -1 66 5 70 C 6 59 8 49 9 39 C 14 39
19 38 25 38 C 25 49 23 61 23 73 C 30 70 27 60 27 54 C 28 36 31 17 38 1 L 34 0" />
<path d="M 50 31 C 46 38 44 45 41 53 C 40 56 39 60 40 64 L 42 64 C 44 59 45 54
46 49 C 48 50 49 51 52 52 C 50 57 52 63 57 66 C 58 61 56 56 56 51 C 59 50 61 49
64 47 C 61 46 58 46 56 45 C 53 42 53 34 52 31 L 50 31 z M 49 41 C 50 43 50 44
51 47 L 47 49 C 47 46 48 43 49 41 z" />
<path d="M 83 61 C 79 59 74 60 71 57 C 68 53 70 41 71 37 C 64 39 66 46 65 52 C
65 54 64 58 66 60 C 70 65 79 65 83 61" />
<path d="M 107 13 C 104 23 104 36 108 47 C 111 54 114 63 121 54 C 122 52 123
51 124 50 C 125 51 127 53 129 54 C 134 57 139 55 143 50 C 149 43 153 34 157 26
C 159 21 162 17 163 13 L 158 13 C 154 23 149 34 142 43 C 141 46 138 48 137 52 C
132 50 129 48 127 44 L 125 45 C 124 43 124 43 123 43 C 121 46 118 49 116 53 C
114 48 112 45 111 41 C 109 31 109 22 110 13 L 107 13" />
<path d="M 153 53 L 152 56 C 154 56 155 56 158 56 C 156 54 155 53 153 53" />
<path d="M 211 55 C 206 56 203 58 199 57 C 189 57 180 46 182 36 C 183 27 190
18 198 13 C 205 9 210 11 218 12 C 213 3 204 5 198 8 C 188 14 175 29 177 42 C
178 51 187 60 196 62 C 201 63 212 63 211 55" />
<path d="M 230.2793 37.738281 C 229.89349 37.729675 229.46875 37.8125 229 38 C
226 39 224 42 223 45 C 220 50 218 57 220 64 C 223 61 223 58 224 54 C 232 54 231
62 235 69 C 239 64 232 56 241 54 C 239 51 238 50 235 50 C 234.09375 46.375
234.00873 37.821472 230.2793 37.738281 z M 228 44 C 229 45 230 47 231 50 L 226
50 L 228 44 z" />
<path d="M 245 42 C 243 47 242 54 243 59 C 243 61 243 65 245 65 C 249 64 246
52 247 50 C 252 55 253 73 263 72 C 261 66 261 61 260 56 C 263 53 263 47 263 43
C 259 46 257 52 257 58 C 254 51 252 44 245 42" />
<path d="M 286 43 C 273 43 274 64 274 74 C 283 72 274 61 284 60 L 285 74 L 290
74 C 289 68 286 61 293 59 L 293 56 C 286 54 286 48 286 43 z M 282 49 C 283 51
283 53 284 56 L 279 57 C 279 54 280 51 282 49 z" />
<path d="M 304.79297 41.806641 C 301.8125 41.765625 297.875 44.5 297 48 C 295
54 295 64 297 71 C 300 68 300 66 301 62 C 303 65 306 70 310 73 C 315 76 316 69
316 66 C 310 67 308 63 305 59 C 307 58 310 58 312 55 C 315 51 312 44 306 42 C
305.625 41.875 305.21875 41.8125 304.79297 41.806641 z M 304.15039 47.570312 C
306.09 47.667908 308.375 49.34375 310 53 L 301 56 C 299.21875 50.65625
301.31558 47.427673 304.15039 47.570312 z" />
<path d="M 329 90 C 330 89 332 89 333 87 C 334 85 331 80 331 77 C 330 71 333
65 332 60 C 337 56 342 50 341 44 C 337 45 333 53 330 53 C 325 53 326 47 325 45
C 325 43 324 42 322 43 C 319 45 322 52 323 54 C 324 58 327 59 328 63 C 329 67
327 71 327 74 C 326 80 327 84 329 90" />
<path d="M 372 10 L 374 13 C 376 12 377 12 380 13 C 381 13 382 14 383 14 C 384
15 386 15 386 16 C 394 24 373 25 375 34 C 377 40 390 43 389 51 C 387 59 375 62
375 71 C 383 67 399 55 393 45 C 390 38 382 37 380 31 C 384 29 394 26 395 20 C
395 17 392 15 389 13 C 384 9 378 6 372 10" />
</svg>
</div>
<div role="main">
<h1>Address Book Reader</h1>
<p>written in <a href="http://www.python.org">Python</a></p>
<p>Here's a nice little program (two programs, in fact; does that make it a suite?) that searches an address book and displays entries. There are two halves to the program. <code>read.script</code> is meant for use on the command line. <code>read.cgi</code> is for the web. <code>read.cgi</code> used not-so-secure password protection.</p>
<hr />
<h2>The address Book</h2>
<p>Here's an example address book:</p>
<pre><code>NAME: 
Alfred Boxwell
email: aboxwell@aol.com

NAME: 
Cal Donaldson
email: cdonaldson@donaldson.net
web: http://www.donaldson.net/~cdonaldson/
phone: 123-456-7890
phone: 123-237-9478 (cell)
snail: 1234 Main St. \\ Townshire, IN 12345
photo: http://www.donaldson.net/~cdonaldson/photo_of_me.jpg
</code></pre>
<p>I kind of made up the format as I went along. The important things are: (1) it is easy to edit with your favorite text editor. (2) it's flexible. Note that not every entry has to have every field, and any entriy can have two (or more) of the same field filled. Feel free to add new fields to the formatt, or even comments.</p>
<hr />
<h2>the script: read.script</h2>
<p>Here it is:</p>
<pre><code>#!/usr/bin/python 
#
# ``Address Book Reader''
# by Hal Canary
# August 2000
#
# Use: 
# read.script 
#	will prompt you for the search pattern.	
# read.script Hal
#	will search for &quot;Hal&quot;
# read.script Hal Canary
#	will search for &quot;Hal Canary&quot;
# read.script Hal Winchester Canary 
#	will search for &quot;Hal Winchester&quot;
# read.script &quot;Hal Winchester Canary&quot; 
#	will search for &quot;Hal Winchester Canary&quot;
#	
addressbooklocal = '/home/hal/address.book' #where is my book?
import sys
import readline

#A function to compare two strings:
def check_strs(big_string, little_string):
	if len(little_string) &gt; len(big_string):
		return 0
	i = 0
	while i &lt;= (len(big_string) - len(little_string)) :
		if big_string[i:i+len(little_string)] ==little_string :
			return 1
		i = i+1
	return 0

#Find out what we're searching for:
if len(sys.argv) == 2:
	name = sys.argv[1]
elif len(sys.argv) &gt;= 3:
	name = sys.argv[1] + &quot; &quot; + sys.argv[2]
else:
	name = raw_input(&quot;Pleas enter a name: &quot;)
print &quot;Searching for ``&quot; + name + &quot;''\n&quot; 

#Main search procedure:
file = open(addressbooklocal, 'r')
line = file.readline()	
while line != '':
	if line == 'NAME: \012':
		line = file.readline()	
		if check_strs(line, name):
			while line != 'NAME: \012' and line != '': 
				print line,
				line =  file.readline()	
	else:
		line = file.readline()	
file.close()
</code></pre>
<p>You should get output like this:</p>
<pre><code>[hal@ups ~]&gt;read.script Alfred
Searching for ``Alfred''

Alfred Boxwell
email: aboxwell@aol.com

[hal@ups ~]&gt;read.script Don
Searching for ``Don''

Cal Donaldson
email: cdonaldson@donaldson.net
web: http://www.donaldson.net/~cdonaldson/
phone: 123-456-7890
phone: 123-237-9478 (cell)
snail: 1234 Main St. \\ Townshire, IN 12345
photo: http://www.donaldson.net/~cdonaldson/photo_of_me.jpg

[hal@ups ~]&gt;
</code></pre>
<p>Any Questions?</p>
<hr />
<h2>The CGI Script</h2>
<p>Here it is. Note the password protection!</p>
<pre><code>#!/usr/bin/python
password = 'BadPassword'
addressbooklocal = '/home/hal/address.book'
print &quot;Content-type: text/html \n&quot;
print &quot;&lt;!DOCTYPE HTML PUBLIC \&quot;-//W3C//DTD HTML 4.0 Transitional//EN\&quot;&gt;&quot;
print &quot;&lt;HTML&gt;\n&lt;HEAD&gt;\n&lt;TITLE&gt;Address Book&lt;/TITLE&gt;\n&lt;/HEAD&gt;\n&quot;
print &quot;&lt;BODY bgcolor=\&quot;#ffff80\&quot; text=\&quot;black\&quot;&gt;\n&lt;blockquote&gt;\n&quot;
print &quot;&lt;h1&gt;Address Book&lt;/h1&gt;\n &quot;

import cgi
def check_strs(big_string, little_string):
	if len(little_string) &gt; len(big_string):
		return 0
	i = 0
	while i &lt;= (len(big_string) - len(little_string)) :
		if big_string[i:i+len(little_string)] ==little_string :
			return 1
		i = i+1
	return 0

def formatEntry(string, isname):
	if isname==1:
		return &quot;&lt;b&gt;&lt;big&gt;&quot; + string[:-1] + &quot;&lt;/big&gt;&lt;/b&gt;&lt;br&gt;\n&quot;
	elif string[0:7] == 'email: ':
		return '&lt;i&gt;email:&lt;/i&gt; &lt;a href=&quot;mailto:' + string[7:-1] + '&quot;&gt;'+string[7:-1] + '&lt;/a&gt;' + &quot;&lt;br&gt;\n&quot;
	elif string[0:5] == 'web: ':
		return '&lt;i&gt;web:&lt;/i&gt; &lt;a href=&quot;' + string[5:-1] + '&quot;&gt;'+string[5:-1] + '&lt;/a&gt;' + &quot;&lt;br&gt;\n&quot;
	elif string[0:7] == 'phone: ':
		return '&lt;i&gt;phone:&lt;/i&gt; ' + string[7:-1] + &quot;&lt;br&gt;\n&quot;
	elif string[0:7] == 'snail: ':
		return '&lt;i&gt;snail:&lt;/i&gt; ' + string[7:-1] + &quot;&lt;br&gt;\n&quot;
	elif string[0:7] == 'photo: ':
		return '&lt;img src=&quot;' + string[7:-1] + '&quot;&gt;' + &quot;&lt;br&gt;\n&quot;
	#	return '&lt;i&gt;photo: &lt;/i&gt; &lt;a href=&quot;' + string[7:-1] + '&quot;&gt;'+string[7:-1] + '&lt;/a&gt;' + &quot;&lt;br&gt;\n&quot;
	elif string[0:5] == 'ICQ: ':
		return '&lt;i&gt;ICQ:&lt;/i&gt; ' + string[7:-1] + &quot;&lt;br&gt;\n&quot;
	else:
		return string[:-1] + &quot;&lt;br&gt;\n&quot;

form = cgi.FieldStorage()
form_ok = 0
if form.has_key(&quot;data&quot;) and form.has_key(&quot;passwd&quot;):
	if form[&quot;passwd&quot;].value == password:
		form_ok=1
if not form_ok:
	print &quot;ERROR!&quot;
	name = &quot;ERROR!&quot;
else:
	name = form[&quot;data&quot;].value
print &quot;&lt;h2&gt;Searching for ``&quot; + name + &quot;''&lt;/h2&gt;&quot; , 
print '&lt;hr width=&quot;300&quot; align=&quot;left&quot;&gt;' + &quot;\n&quot; 
file = open(addressbooklocal, 'r')
line = file.readline()	
isname=0
while line != '' and  form_ok:
	if line == 'NAME: \012':
		line = file.readline()	
		if check_strs(line, name):
			isname=1
			while line != '\012' and line != '': 
				print formatEntry(line, isname), 
				isname=0
				line =  file.readline()
			print '&lt;hr width=&quot;300&quot; align=&quot;left&quot;&gt; \012'
	else:
		line = file.readline()	
print &quot;\n&lt;h2&gt;Another Search?&lt;/h2&gt;&quot;
print '&lt;FORM METHOD=POST ACTION=&quot;/cgi-bin/hal/book/read.cgi&quot;&gt;'
print '&lt;p&gt;Enter Name:'
print '&lt;br&gt;&lt;INPUT TYPE=TEXT NAME=&quot;data&quot; SIZE=25 MAXLENGTH=80&gt;'
print '&lt;!--&lt;p&gt;Enter Password:--&gt;'
print '&lt;br&gt;&lt;INPUT TYPE=hidden NAME=&quot;passwd&quot; SIZE=25 MAXLENGTH=80 value=&quot;' + password + '&quot;&gt;'
print '&lt;br&gt;&lt;INPUT TYPE=SUBMIT VALUE=&quot;Sumbit&quot;&gt;'
print '&lt;/FORM&gt;'
print &quot;\n&lt;/blockquote&gt;\n&lt;/body&gt;\n&lt;/html&gt;&quot;
file.close()
</code></pre>
<p>Here's the web page that acceses this cgi-script:</p>
<pre><code>&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.0 Transitional//EN&quot;&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Address Book&lt;/title&gt;
&lt;/head&gt;

&lt;body bgcolor=&quot;#ffff80&quot; text=&quot;black&quot;&gt;
&lt;blockquote&gt;
&lt;h1&gt;Address Book&lt;/h1&gt;
&lt;form method=&quot;post&quot; action=&quot;/cgi-bin/read.cgi&quot;&gt;
&lt;p&gt;Enter Name:
&lt;br&gt;&lt;input type=&quot;text&quot; name=&quot;data&quot; size=&quot;25&quot; maxlength=&quot;80&quot;&gt;
&lt;p&gt;Enter Password:
&lt;br&gt;&lt;input type=&quot;password&quot; name=&quot;passwd&quot; size=&quot;25&quot; maxlength=&quot;80&quot;&gt;
&lt;br&gt;&lt;input type=&quot;submit&quot; value=&quot;Sumbit&quot;&gt;
&lt;/form&gt;
&lt;/blockquote&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>And here's some sample output:</p>
<pre><code>&lt;h1&gt;Address Book&lt;/h1&gt;

&lt;h2&gt;Searching for ``Cal''&lt;/h2&gt; 

&lt;hr width=&quot;300&quot; align=&quot;left&quot; /&gt;

&lt;b&gt;&lt;big&gt;Cal Donaldson&lt;/big&gt;&lt;/b&gt;&lt;br /&gt;
&lt;i&gt;email:&lt;/i&gt; &lt;a
href=&quot;mailto:cdonaldson@donaldson.net&quot;&gt;cdonaldson@donaldson.net&lt;/a&gt;&lt;br /&gt;
&lt;i&gt;web:&lt;/i&gt; &lt;a href=&quot;http://www.donaldson.net/~cdonaldson/&quot;&gt;http://www.donaldson.net/~cdonaldson/&lt;/a&gt;&lt;br /&gt;
&lt;i&gt;phone:&lt;/i&gt; 123-456-7890&lt;br /&gt;
&lt;i&gt;phone:&lt;/i&gt; 123-237-9478 (cell)&lt;br /&gt;

&lt;i&gt;snail:&lt;/i&gt; 1234 Main St. \\ Townshire, IN 12345&lt;br /&gt;
&lt;img src=&quot;http://www.donaldson.net/~cdonaldson/photo_of_me.jpg&quot; alt=&quot;&quot; /&gt;&lt;br /&gt;
&lt;hr width=&quot;300&quot; align=&quot;left&quot; /&gt; 

&lt;h2&gt;Another Search?&lt;/h2&gt;
&lt;form method=&quot;post&quot; action=&quot;/cgi-bin/read.cgi&quot;&gt;
&lt;p&gt;Enter Name:
&lt;br/&gt;
&lt;input type=&quot;text&quot; name=&quot;data&quot; size=&quot;25&quot; maxlength=&quot;80&quot; /&gt;
&lt;!--&lt;p&gt;Enter Password:--&gt;
&lt;br /&gt;
&lt;input type=&quot;hidden&quot; name=&quot;passwd&quot; size=&quot;25&quot; 
    maxlength=&quot;80&quot; value=&quot;BadPassword&quot; /&gt;
&lt;br /&gt;
&lt;input type=&quot;submit&quot; value=&quot;Sumbit&quot; /&gt;

&lt;/p&gt;
&lt;/form&gt;
</code></pre>
<hr />
<hr />
<p>file modification time: 2003-07-16 05:18:49</p>
<hr />

</div>
</body>
</html>
