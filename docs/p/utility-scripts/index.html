<!DOCTYPE html>
<html lang="en-US">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Utility Scripts for Unix-compatable systems (id est GNU/Linux)</title>
<link href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQAAAADrRVxmAAAACXBIWXMAAAMfAAADHwHmEQywAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAVZJREFUSMfd1EuOwyAMAFAQ0rAZNUfIUTga5GbsZtkrcINhyQLBYMgHG6ZddJcoSpOXDzY2ZZls7F5Q9iAzhyu/XsAomCm4AdRHYPUUNAH7GTgdRbZd+k6FCZgGZQPw/DV45dgIWw+rc3rrRvGrHcBrjmDzqocAIBCIsr+ERcYFwYNAfMj0QPC9pC+JIWNgpfJvQGXTQwJYCFgMegSHIWPIA/DaplO49UIuEy7qUR5gWakJHA+oXZhNZYBYQNQnlgaBKSthrRjRwJXfcu+ZA28A5fmF7yXWwKg+BgB9AJyxPtgGib8FQSCKjEcZQR7XqUUaTgiCgJME9vRPMEwREJk+McCKodUBDUvjiDTSfU4v2NPvwCqc7QHif3Bz6Ga9vZIYga5yVs9rO1Qf+uOnSw6yhnKu2Yurx+C/Ru8TVLuQl9HPtmx9CqCvTlYwxxz3eqhv3Htl/wEokJpySHNGkgAAAABJRU5ErkJggg==" rel="icon"/>
<style>
@media (prefers-color-scheme:dark) {body {background-color:#000;color:#FFF;}
a:visited {color:#C0F;}
a:link, a:hover, a:active {color:#0CF;}
}
@media print {body {max-width:8in;font-size:12px;margin:0;}
}
@media screen {body {font-family:sans-serif;max-width:35em;margin:22px auto 64px auto;padding:0 8px;}
}
body {overflow-wrap:break-word;}
@page {size:auto;margin:0.25in 0.5in 0.5in 0.5in;}
svg {fill:currentColor;}
img {max-width:100%;height:auto;}
hr {border-style:solid none;}
.content {margin:1em 0;}
.content hr {padding:0;margin:0;border:none;text-align:center;}
.content hr:after {font-size:150%;content:"* \A0 * \A0 *";display:block;position:relative;}
.rightside {text-align:right;}
.centered {text-align:center;}
pre {overflow-x:auto;}
.byline > * {display:inline-block;border-style:solid;border-width:thin;padding:3px 8px;border-radius:5px;text-align:initial;}
.byline {text-align:right;}
.box {border-style:solid;border-width:thin;margin:8px 0;padding:0 8px;}
a.hiddenlink:link {background:inherit;color:inherit;text-decoration:none;}
a.hiddenlink:visited {background:inherit;color:inherit;text-decoration:none;}
a.hiddenlink:active {background:inherit;color:inherit;text-decoration:none;}
ul,ol {padding-left:30px;}
table.border {border-collapse:collapse;margin:8px auto;}
table.border tr > * {border-style:solid;border-width:thin;padding:3px 8px;border-radius:5px;}
.tophead {text-align:center;margin:1ex auto 0 auto;max-width:35em;}
.tightmargins li > ul > li {list-style-type:square;}
.tightmargins h1,
.tightmargins h2,
.tightmargins p,
.tightmargins ul {margin:0.5ex 0;}
.tightmargins li > ul {margin:0 0 0.5ex 0;}
.tightmargins ul {padding-left:30px;}
.tightmargins li {margin:0 0 0.5ex 0;}
.plainlink a:link,
.plainlink a:visited,
.plainlink a:hover,
.plainlink a:active {color:inherit;text-decoration:underline;}
.nolink a:link,
.nolink a:visited,
.nolink a:hover,
.nolink a:active {color:inherit;text-decoration:none;}
div.lcr {display:grid;grid-template-columns:auto auto auto;}
ul.flat {list-style-type:none;margin:16px 0;padding:0;}
ul.flat li {display:inline;}
ul.flat li::after {content:"]";}
ul.flat li::before {content:"[";}
</style>
<!--
Copyright 2002-2022 Hal Canary. ALL RIGHTS RESERVED.
-->
</head>
<body>
<div class="tophead" role="banner">
<svg aria-label="Hal W Canary 3" role="img" viewBox="-200 0 800 91" width="100%">
<title>Hal W Canary 3</title>
<rect height="4" width="180" x="-200" y="43" />
<rect height="4" width="180" x="420" y="43" />
<path d="M 34 0 C 30 6 28 13 27 20 C 26 23 27 28 25 31 C 21 35 13 34 9 35 C 12
24 9 13 12 3 L 8 2 C 4 18 6 36 3 53 C 2 58 -1 66 5 70 C 6 59 8 49 9 39 C 14 39
19 38 25 38 C 25 49 23 61 23 73 C 30 70 27 60 27 54 C 28 36 31 17 38 1 L 34 0" />
<path d="M 50 31 C 46 38 44 45 41 53 C 40 56 39 60 40 64 L 42 64 C 44 59 45 54
46 49 C 48 50 49 51 52 52 C 50 57 52 63 57 66 C 58 61 56 56 56 51 C 59 50 61 49
64 47 C 61 46 58 46 56 45 C 53 42 53 34 52 31 L 50 31 z M 49 41 C 50 43 50 44
51 47 L 47 49 C 47 46 48 43 49 41 z" />
<path d="M 83 61 C 79 59 74 60 71 57 C 68 53 70 41 71 37 C 64 39 66 46 65 52 C
65 54 64 58 66 60 C 70 65 79 65 83 61" />
<path d="M 107 13 C 104 23 104 36 108 47 C 111 54 114 63 121 54 C 122 52 123
51 124 50 C 125 51 127 53 129 54 C 134 57 139 55 143 50 C 149 43 153 34 157 26
C 159 21 162 17 163 13 L 158 13 C 154 23 149 34 142 43 C 141 46 138 48 137 52 C
132 50 129 48 127 44 L 125 45 C 124 43 124 43 123 43 C 121 46 118 49 116 53 C
114 48 112 45 111 41 C 109 31 109 22 110 13 L 107 13" />
<path d="M 153 53 L 152 56 C 154 56 155 56 158 56 C 156 54 155 53 153 53" />
<path d="M 211 55 C 206 56 203 58 199 57 C 189 57 180 46 182 36 C 183 27 190
18 198 13 C 205 9 210 11 218 12 C 213 3 204 5 198 8 C 188 14 175 29 177 42 C
178 51 187 60 196 62 C 201 63 212 63 211 55" />
<path d="M 230.2793 37.738281 C 229.89349 37.729675 229.46875 37.8125 229 38 C
226 39 224 42 223 45 C 220 50 218 57 220 64 C 223 61 223 58 224 54 C 232 54 231
62 235 69 C 239 64 232 56 241 54 C 239 51 238 50 235 50 C 234.09375 46.375
234.00873 37.821472 230.2793 37.738281 z M 228 44 C 229 45 230 47 231 50 L 226
50 L 228 44 z" />
<path d="M 245 42 C 243 47 242 54 243 59 C 243 61 243 65 245 65 C 249 64 246
52 247 50 C 252 55 253 73 263 72 C 261 66 261 61 260 56 C 263 53 263 47 263 43
C 259 46 257 52 257 58 C 254 51 252 44 245 42" />
<path d="M 286 43 C 273 43 274 64 274 74 C 283 72 274 61 284 60 L 285 74 L 290
74 C 289 68 286 61 293 59 L 293 56 C 286 54 286 48 286 43 z M 282 49 C 283 51
283 53 284 56 L 279 57 C 279 54 280 51 282 49 z" />
<path d="M 304.79297 41.806641 C 301.8125 41.765625 297.875 44.5 297 48 C 295
54 295 64 297 71 C 300 68 300 66 301 62 C 303 65 306 70 310 73 C 315 76 316 69
316 66 C 310 67 308 63 305 59 C 307 58 310 58 312 55 C 315 51 312 44 306 42 C
305.625 41.875 305.21875 41.8125 304.79297 41.806641 z M 304.15039 47.570312 C
306.09 47.667908 308.375 49.34375 310 53 L 301 56 C 299.21875 50.65625
301.31558 47.427673 304.15039 47.570312 z" />
<path d="M 329 90 C 330 89 332 89 333 87 C 334 85 331 80 331 77 C 330 71 333
65 332 60 C 337 56 342 50 341 44 C 337 45 333 53 330 53 C 325 53 326 47 325 45
C 325 43 324 42 322 43 C 319 45 322 52 323 54 C 324 58 327 59 328 63 C 329 67
327 71 327 74 C 326 80 327 84 329 90" />
<path d="M 372 10 L 374 13 C 376 12 377 12 380 13 C 381 13 382 14 383 14 C 384
15 386 15 386 16 C 394 24 373 25 375 34 C 377 40 390 43 389 51 C 387 59 375 62
375 71 C 383 67 399 55 393 45 C 390 38 382 37 380 31 C 384 29 394 26 395 20 C
395 17 392 15 389 13 C 384 9 378 6 372 10" />
</svg>
</div>
<div role="main">
<h1>Utility Scripts for Unix-compatable systems (id est GNU/Linux)</h1>
<p>execute a program in the background, redirect stdout and stderr to null, and keep it from being hungup. [Depends on: Bourne shell, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/amp
nohup &quot;$@&quot; &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre>
<p>Command line calculator based on bc, along with commonly used math functions. [Depends on: Bourne shell, bc]</p>
<pre><code>#!/bin/sh
# ~/bin/calc
echo 'define ln(a) { return l(a); }
define exp(a) { return e(a); }
define pow(a,b) { return e(b*l(a)); }
define sqrtt(a) { return e(0.5*l(a)); }
define log(a) { return l(a)/l(10); }
define sin(a) { return s(a); }
define cos(a) { return c(a); }
define tan(a) { return s(a)/c(a); }
define sec(a) { return 1/c(a); }
define csc(a) { return 1/s(a); }
define cot(a) { return c(a)/s(a); }
define asin(x) { return a(x/sqrt(1-(x^2))); }
define acos(x) { return a(sqrt(1-(x^2))/x); }
define atan(x) { return a(x); }
define asec(x) { return a(sqrt((x^2)-1)); }
define acsc(x) { return a(1/sqrt((x^2)-1)); }
define acot(x) { return a(1/x);}
define sinh(x) { return (e(x)-e(-x))/2;}
define cosh(x) { return (e(x)+e(-x))/2;}
define tanh(x) { return (e(2*x) - 1)/(e(2*x) + 1); }
define asinh(x) { return l(x+sqrt((x^2)+1)); }
define acosh(x) { return l(x+sqrt((x^2)-1)); }
define atanh(x) { return 0.5*l((1+x)/(1-x)); }
pi = 4*a(1);
scale = 6;
' &quot;$@&quot; | bc -l
</code></pre>
<p>Make a file executeable. Saves keystrokes. [Depends on: Bourne shell, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/chx
chmod +x &quot;$@&quot;
</code></pre>
<p>Egg timer. Be sure to make something LOUD for your alarm; use sox to ajust the volume. [Depends on: Bourne shell, coreutils, mplayer]</p>
<pre><code>#!/bin/sh
# EGG TIMER.  #DTPD#
# ${HOME}/bin/timer
MINUTES=$1
echo ${MINUTES}:00
for M in `seq -w $(($MINUTES - 1)) -1 0`; do 
  for S in `seq -w 55 -5 0`; do 
    sleep 5 ; echo ${M}:${S}
  done
done
echo -e &quot;\n\n\t\tALARM! ALARM! ALARM!\n\n&quot;
exec mplayer ~/Music/ALARM.mp3 &amp;&gt; /dev/null
</code></pre>
<p>Quickly update the system using yum. Yet another keystroke saver.[Depends on: Bourne shell, sudo, yum]</p>
<pre><code>#!/bin/sh
# ~/bin/syyu
echo 'sudo yum -y update'
exec sudo yum -y update
</code></pre>
<p>A somewhat safer way to shred all the files in a directory. [Depends on: Bourne shell, coreutils, findutils]</p>
<pre><code>#!/bin/sh
# ~/bin/rm-shred
{ for x in &quot;$@&quot; ; do
  # regular file
  find &quot;$x&quot; -type f -exec shred -u -n 1 {} \;
  # symlink
  find &quot;$x&quot; -type l -exec rm {} \;
  # wierd files
  find &quot;$x&quot; -type b -printf &quot;%p is a block file&quot;
  find &quot;$x&quot; -type c -printf &quot;%p is a character file&quot;
  find &quot;$x&quot; -type p -printf &quot;%p is a named pipe&quot;
  find &quot;$x&quot; -type s -printf &quot;%p is a socket&quot;
  # if we get here it is a directory or has been noted
  rm -r &quot;$x&quot;
done } 2&gt; /dev/null
</code></pre>
<p>Safe File Removal [Depends on: Bourne shell, coreutils]</p>
<pre><code>#!/bin/sh

## rms
##   &quot;rm, safely.&quot; I also think it's funny
##   that I've named my reimplementation
##   of the MSFT recycling bin after RMS.
## (c) 2000-2003 Hal Canary
##
## License:
##   This is free software, see
##   http://www.gnu.org/licenses/gpl.txt
##   This product is distributed
##   WITHOUT ANY WARRANTY of any kind.

## TRASH=/tmp/$USER/trash
TRASH=${HOME}/tmp/Trash

if [ &quot;$#&quot; -lt 1 ]; then
  echo &quot;Usage: $0 FILE&quot;;
  echo &quot;Move FILE to $TRASH.&quot;;
  exit 1;
fi

test -d &quot;$TRASH&quot; || mkdir -pv $TRASH

for file in &quot;$@&quot;; do
  if [ -e &quot;$file&quot; ]; then
    mv -f -- &quot;$file&quot; $TRASH/
    echo &quot;$file -&gt; $TRASH/&quot;
  else
    echo &quot;Does $file exist?&quot;
  fi
done
exit 0;
</code></pre>
<p>A terminal locker [Depends on: bash, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/tlock
PASS='12345' ; TRY=''
trap '' TERM INT
clear
while [ &quot;$TRY&quot; != &quot;$PASS&quot; ] ; do
  echo -en &quot;\ntlock password: &quot;
  stty -echo; read TRY; stty echo;
done
echo &quot;&quot;;
</code></pre>
<p>Prepend a string to the beginning of each of a set of filename. [Depends on: Bourne shell, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/prepend-something
if [ &quot;$#&quot; -lt 2 ] ; then
 echo &quot;useage:  $0 PREFEX FILE[S]&quot;
 exit 1
fi
PREFEX=${1}
for argc in `seq 2 $#`; do
 eval arg=\${$argc}
 mv -v &quot;${arg}&quot; &quot;${PREFEX}${arg}&quot;
done
</code></pre>
<p>Make a Fair Use backup of a DVD that you own using mencoder. [Depends on: Bourne shell, coreutils, mencoder, mktemp]</p>
<pre><code>#!/bin/sh
# ~/bin/rip-and-encode-dvd
X=`mktemp video-XXXXXXXXXX`
mv $X ${X}.avi
exec nice mencoder &quot;dvd://1&quot; -alang en \
 -slang en -o ${X}.avi -ovc lavc \
 -lavcopts &quot;aspect=16/9:vcodec=mpeg4&quot; \
 -oac copy 2&gt; /dev/null
</code></pre>
<p>Print date+time in ISO 8601 format. [Depends on: Bourne shell, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/isodatetime
#date --rfc-3339=seconds
exec date +%Y-%m-%dT%T%z
</code></pre>
<p>Print just the date in ISO 8601 format. [Depends on: Bourne shell, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/isodate
exec date +%Y-%m-%d
</code></pre>
<p>Suppose you want to pipe something into a file as root using sudo. For example: <code>sudo echo 1 &gt; /proc/sys/net/ipv4/ip_forward</code> ; this won't work. Instead try the sud script like this: <code>sud 'echo 1 &gt; /proc/sys/net/ipv4/ip_forward'</code> . [Depends on: Bourne shell, coreutils, sudo]</p>
<pre><code>#!/bin/sh
# ~/bin/sud
sudo su -c &quot; $* &quot;
</code></pre>
<p>Self-documented. [Depends on: Bourne shell, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/shorten
if [ &quot;$#&quot; -ne 1 ] ; then
 echo &quot;useage:  shorten N&quot;
 echo &quot;   where N is a nonnegative integer&quot;
 echo &quot;   To print out the first N bytes of&quot;
 echo &quot;   the stdin to stdout.&quot;
 exit 1
fi
head -c $1
echo &quot;&quot;
</code></pre>
<p>Launch my favorite terminal editor. [Depends on: Bourne shell, emacs]</p>
<pre><code>#!/bin/sh
# ~/bin/e
#exec nano &quot;$@&quot;
exec emacs -nw &quot;$@&quot;
</code></pre>
<p>Launch my favorite gui editor, gedit. [Depends on: Bourne shell, coreutils, gedit]</p>
<pre><code>#!/bin/sh
# ~/bin/ge
nohup gedit &quot;$@&quot; &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre>
<p>sudo ifup [Depends on: Bourne shell, sudo, intiscripts]</p>
<pre><code>#!/bin/sh
# ~/bin/u
sudo /sbin/ifup &quot;$@&quot;
</code></pre>
<p>sudo ifdown [Depends on: Bourne shell, sudo, intiscripts]</p>
<pre><code>#!/bin/sh
# ~/bin/d
sudo /sbin/ifdown &quot;$@&quot;
</code></pre>
<p>[Depends on: Bourne shell, xorg-x11-apps, sudo, Linux kernel]</p>
<pre><code>#!/bin/sh
# ~/bin/xconsole-proc-kmsg
sudo -b xconsole -file /proc/kmsg
</code></pre>
<p>Launch gthumb in the current directory if no argument. otherwise pass over all arguments. [Depends on: Bourne shell, gthumb]</p>
<pre><code>#!/bin/sh
# ~/bin/gt
if [ &quot;$#&quot; -eq 0 ] ;  then 
  echo gthumb . \&gt; /dev/null 2\&gt;\&amp;1 \&amp;
  gthumb . &gt; /dev/null 2&gt;&amp;1 &amp;
else
  echo gthumb &quot;$@&quot; \&gt; /dev/null 2\&gt;\&amp;1 \&amp;
  gthumb &quot;$@&quot; &gt; /dev/null 2&gt;&amp;1 &amp;
fi
</code></pre>
<p>Launch Evince [Depends on: Bourne shell, evince]</p>
<pre><code>#!/bin/sh
# ~/bin/ev
evince &quot;$@&quot; &gt; /dev/null 2&gt;&amp;1 &amp;
</code></pre>
<p>Encrypt or decrypt with the ROT13 Cypher. Useage: <code>rot13 Uryyb jbeyq.</code> or <code>echo Uryyb jbeyq. | rot13</code> . [Depends on: Bourne shell, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/rot13
if [ &quot;$#&quot; -gt 0 ] ; then
 echo &quot;$@&quot; | tr A-Za-z N-ZA-Mn-za-m
else
 tr A-Za-z N-ZA-Mn-za-m
fi
</code></pre>
<p>Grab a file over http and pipe it to stdout. [Depends on: Bourne shell, wget]</p>
<pre><code>#!/bin/sh
# ~/bin/wgeto
exec wget -o /dev/null -O - &quot;$@&quot;
</code></pre>
<p>Extract a bunch of rar files. [Depends on: Bourne shell, unrar, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/unrar-extract
for x in &quot;$@&quot; ; do
 nice unrar x &quot;$x&quot;
done
</code></pre>
<p>List only directories. [Depends on: Bourne shell, grep, coreutils]</p>
<pre><code>#!/bin/sh
# ~/bin/lsd
/bin/ls --color='yes' -l &quot;$@&quot; | grep &quot;^d&quot;
# /bin/ls --color=yes -p &quot;$@&quot; | grep &quot;/$&quot;
</code></pre>
<p>Generate Password. Self-documented. [Depends on: Bourne shell, Linux kernel, coreutils, sed]</p>
<pre><code>#!/bin/sh
# ~/bin/genpasswd
#   Generate a random password with about
#   142 bits of randomness, making use of
#   /dev/random.
# Note:
#   Most online services have somewhat
#   arbitrary rules about what characters
#   can be included in a password. So we
#   limit ourselves to A-Za-z0-9.
# Copyright 2007 Hal Canary
# Dedicated to the Public Domain.
echo &quot;Grabbing bits from /dev/random...&quot; 1&gt;&amp;2
head -c 18 /dev/random | base64 | \
 sed 's/\//Z/g;s/+/z/g;'
# If you lack base64 on your system, try:
# head -c 18 /dev/random  | uuenview -b '' | \
#   sed 's/\//Z/g;s/+/z/g;'
</code></pre>
<p>Convert mp3 files to CD-Audio. [Depends on Bourne Shell, coreutils, lame, sox.]</p>
<pre><code>#!/bin/sh

# ~/bin/makecdrfiles

# Convert mp3s to .cdr format for an audio CD.
# Copyright 2000-2007 Hal Canary
# Dedicated to the Public Domain.

if [ &quot;$#&quot; -lt 1 ] ; then
  echo &quot;  Useage: $0 file.mp3 [more files.mp3]&quot;
  echo &quot;&quot;
  echo &quot;  After you're done, burn with:&quot;
  echo -n '   sudo cdrecord -v -dao -eject dev=$DEV'
  echo ' -pad -audio *.cdr'
  exit 1
fi
for FILE in &quot;$@&quot; ; do
  nice lame --decode &quot;$FILE&quot; - | \
    nice sox -t wav - &quot;$(basename $FILE .mp3).cdr&quot;
done
</code></pre>
<hr />
<p>file modification time: 2007-06-11 18:58:50</p>
<hr />

</div>
</body>
</html>
