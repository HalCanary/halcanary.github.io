<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voder-Vocoder: gain</title>
<link rel="icon" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACAAQAAAADrRVxmAAAACXBIWXMAAAMfAAADHwHmEQywAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAVZJREFUSMfd1EuOwyAMAFAQ0rAZNUfIUTga5GbsZtkrcINhyQLBYMgHG6ZddJcoSpOXDzY2ZZls7F5Q9iAzhyu/XsAomCm4AdRHYPUUNAH7GTgdRbZd+k6FCZgGZQPw/DV45dgIWw+rc3rrRvGrHcBrjmDzqocAIBCIsr+ERcYFwYNAfMj0QPC9pC+JIWNgpfJvQGXTQwJYCFgMegSHIWPIA/DaplO49UIuEy7qUR5gWakJHA+oXZhNZYBYQNQnlgaBKSthrRjRwJXfcu+ZA28A5fmF7yXWwKg+BgB9AJyxPtgGib8FQSCKjEcZQR7XqUUaTgiCgJME9vRPMEwREJk+McCKodUBDUvjiDTSfU4v2NPvwCqc7QHif3Bz6Ga9vZIYga5yVs9rO1Qf+uOnSw6yhnKu2Yurx+C/Ru8TVLuQl9HPtmx9CqCvTlYwxxz3eqhv3Htl/wEokJpySHNGkgAAAABJRU5ErkJggg==">
<style>
body{
font-family:sans-serif;
max-width:35em;
margin:8px auto;
padding:0 8px;
}
hr.black{
border:0;
height:1px;
color:#000;
background-color:#000;
}
img{
max-width:100%;
height:auto;
}
.content hr{
padding:0;
margin:0;
border:none;
text-align:center;
color:black;
}
.content hr:after{
content:"✶ \A0 ✶ \A0 ✶";
display:block;
position:relative;
}
.rightside{text-align:right}
.centered{text-align:center}
.postbox{
border-bottom:6px solid #ddd;
margin:0 -8px 6px -8px;
padding:0 8px 0 8px;
}
pre{overflow-x:auto}
.byline{
background:#fff;
color:#888;
}
.blogtitle{}
.content{}
.categorylink{}
a.hiddenlink{}
a.hiddenlink:link {
  background: inherit;
  color: inherit;
  text-decoration: none;
}
a.hiddenlink:visited {
  background: inherit;
  color: inherit;
  text-decoration: none;
}
a.hiddenlink:active {
  background: inherit;
  color: inherit;
  text-decoration: none;
}
</style>
</head>
  <!-- Copyright 2009-2020 Hal Canary. ALL RIGHTS RESERVED. -->

  <body>
      <h1 class="blogtitle">gain</h1>

      <div class="byline">By Hal Canary,
        2009-08-29 09:49:02
        (<a href="https://halcanary.org/vv/2009/08/29/802/">link</a>)
    <br><a href="../../../../category/computers-code/" class="categorylink">#computers-code</a>;<a href="../../../../category/music/" class="categorylink">#music</a>
        </div>
      <!-- SRC= 2009-08-29-802 -->
      <div class="content">

<!-- BEGIN CONTENT -->
<p>Back on the CD-ripping project.  For popular music, the album titles and artists names are easy and the online databases almost always give me the right answer.  But for classical music, there are always  discrepancies.  So I always change the <em>artist</em> field to be <em>Composer, Performers</em>.</p>
<p>After ripping a few CDs with Sound Juicer, I then run <a href="http://mp3gain.sourceforge.net/">mp3gain</a> (<code>sudo apt-get install &#0045;&#0045;yes mp3gain</code>) on the album.</p>
<pre>#!/bin/sh
## ~/bin/mp3gain-a-directory
## Written 2009 Hal Canary, #DTPD#
renice 10 $$ &gt; /dev/null
for dir in &quot;$@&quot; ; do
  if [ ! -d &quot;${dir}&quot; ] ; then
    echo &quot;&#0039;${dir}&#0039; is not a directory&quot; &gt;&amp;2
  else
    if ( /bin/ls &quot;${dir}/&quot;*.mp3 &gt; /dev/null 2&gt;&amp;1 ) ; then
      /usr/bin/mp3gain -k -a &quot;${dir}/&quot;*.mp3
    else
      echo &quot;&#0039;${dir}&#0039; has no .mp3 files in it.&quot; &gt;&amp;2
    fi
  fi
done</pre>
<p>That little script takes a list of directories as arguments, treats all of the mp3 files in a directory as an album and applies the same gain (<code>&#0045;a</code>) to each mp3 file in the directory.  The <code>&#0045;k</code> tells it &ldquo;of course I don't want to clip the sound;  don't ask me every time.&rdquo;  Since this operation is processor&#0045; and I/O&#0045;intensive, the <code>renice</code> is always appreciated.</p>
<p>Or, if I want to all of the directories at once, I can run this command:</p>
<pre>find &quot;${HOME}/Music/CDs&quot; &#0045;type d &#0045;exec mp3gain&#0045;a&#0045;directory &quot;{}&quot; &#0092;;</pre>
<p>mp3gain is nice in that it notices that it's already modified a mp3 and won't waste time on it again.</p>


<!-- END CONTENT -->

      </div>
      <hr class="black">

      <p>(<a href="../../../../archives/">back</a>)</p>
  </body>
</html>
